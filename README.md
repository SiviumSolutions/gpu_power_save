gpu_power_save
gpu_power_save — це Bash-скрипт для управління енергоспоживанням ваших AMD GPU на Linux-системах. Він дозволяє легко перемикатися між режимами енергозбереження, продуктивності, а також видаляти та повторно додавати GPU без перезавантаження системи.

Особливості
Режим енергозбереження: Знижує енергоспоживання GPU, коли вони не використовуються.
Режим продуктивності: Максимізує продуктивність GPU для вимогливих завдань.
Повернення до стандартних налаштувань: Швидко повертає GPU до стандартних налаштувань.
Видалення та повторне сканування GPU: Дозволяє видаляти GPU з системи та повторно додавати їх без перезавантаження.
Автоматичне виявлення GPU: Скрипт автоматично виявляє всі AMD GPU у системі.
Вимоги
Linux-система з встановленими AMD GPU.
Встановлений amd-oc для управління налаштуваннями GPU.
Bash-інтерпретатор.
Права суперкористувача (root) для виконання певних операцій.
Встановлення
Клонування репозиторію

bash
Копировать код
git clone https://github.com/SiviumSolutions/gpu_power_save.git
Перехід до каталогу скрипта

bash
Копировать код
cd gpu_power_save
Надання прав на виконання

bash
Копировать код
chmod +x run.sh
Використання
Скрипт підтримує п'ять режимів роботи:

energy — режим енергозбереження.
performance — режим продуктивності.
default — повернення до стандартних налаштувань.
remove — видалення GPU з системи.
rescan — повторне сканування PCI-шини для виявлення GPU.
Синтаксис
bash
Копировать код
sudo ./run.sh [energy|performance|default|remove|rescan]
Примітка: Для деяких операцій потрібні права суперкористувача, тому використовуйте sudo.

Приклади
Режим енергозбереження

Знижує енергоспоживання GPU до мінімуму.

bash
Копировать код
sudo ./run.sh energy
Режим продуктивності

Максимізує продуктивність GPU для інтенсивних завдань.

bash
Копировать код
sudo ./run.sh performance
Повернення до стандартних налаштувань

Повертає всі налаштування GPU до стандартних значень.

bash
Копировать код
sudo ./run.sh default
Видалення GPU з системи

Видаляє GPU з системи без перезавантаження.

bash
Копировать код
sudo ./run.sh remove
Увага: Після видалення GPU їх не буде видно в системі до повторного сканування або перезавантаження.

Повторне сканування PCI-шини

Виявляє видалені раніше GPU без перезавантаження системи.

bash
Копировать код
sudo ./run.sh rescan
Вивід скрипта
Скрипт виводить таблицю з інформацією про кожен GPU:

GPU Name: Назва GPU.
PCI Address: PCI-адреса GPU.
Action: Виконана дія.
Status: Статус виконання (Applied, Failed, Skipped тощо).
Приклад виводу:

less
Копировать код
Applying energy-saving settings...
Detected 2 AMD GPU(s).
GPU Name                                                                                                       | PCI Address  | Action                    | Status
-------------------------------------------------------------------------------------------------------------- | ------------ | ------------------------- | ----------
Advanced Micro Devices, Inc. [AMD/ATI] Radeon RX 5700 XT                                                       | 05:00.0      | amd-oc energy-saving      | Applied
Advanced Micro Devices, Inc. [AMD/ATI] Radeon RX 5700 XT                                                       | 05:00.0      | power_dpm energy-saving   | Applied
Advanced Micro Devices, Inc. [AMD/ATI] Radeon RX 5700 XT                                                       | 08:00.0      | amd-oc energy-saving      | Applied
Advanced Micro Devices, Inc. [AMD/ATI] Radeon RX 5700 XT                                                       | 08:00.0      | power_dpm energy-saving   | Applied
All settings applied to 2 GPU(s).
Додаткова інформація
Налаштування параметрів
Якщо ви бажаєте змінити параметри розгону чи енергозбереження, ви можете відредагувати функцію apply_amd_oc у скрипті та змінити значення опцій для amd-oc.

Приклад:

bash
Копировать код
# Для режиму енергозбереження
if amd-oc --bus "$pci_id" --core-clock 300 --mem-clock 300 --soc-clock 300 --vdd 600 --mvdd 700 --fan 20 --pl 30 &>/dev/null; then
Важливі застереження
Система може стати нестабільною, якщо видалити GPU під час роботи додатків, які їх використовують.
Виконуйте скрипт з правами суперкористувача для успішного застосування всіх налаштувань.
Переконайтеся, що всі важливі дані збережені, перш ніж виконувати операції з видалення або повторного сканування GPU.
Поширені запитання (FAQ)
1. Чому я не бачу мої GPU після виконання команди remove?
Після видалення GPU з системи за допомогою команди remove, вони більше не відображаються в системі. Використайте команду rescan, щоб повторно виявити їх без перезавантаження.

2. Чи потрібно перезавантажувати систему після видалення GPU?
Ні, ви можете використати команду rescan, щоб повторно виявити GPU без перезавантаження.

3. Чи можна налаштувати інші режими роботи GPU?
Так, ви можете додати нові режими або змінити існуючі, відредагувавши скрипт і додавши відповідні налаштування.

Внесок
Якщо ви бажаєте внести свій вклад у розвиток скрипта:

Форкніть репозиторій.
Зробіть свої зміни.
Надішліть Pull Request.
Ліцензія
Цей проект ліцензований під ліцензією MIT — див. файл LICENSE для деталей.

Підтримка
Якщо у вас виникли питання або пропозиції, ви можете зв'язатися з нами через Issues на GitHub.

Автор: SiviumSolutions

Репозиторій: gpu_power_save

Коротка інструкція для завантаження та запуску скрипта з GitHub
Завантаження скрипта безпосередньо

Якщо ви не хочете клонувати весь репозиторій, ви можете завантажити скрипт безпосередньо:

bash
Копировать код
wget https://raw.githubusercontent.com/SiviumSolutions/gpu_power_save/main/run.sh -O gpu_power_control.sh
Надання прав на виконання

bash
Копировать код
chmod +x gpu_power_control.sh
Запуск скрипта

Використовуйте sudo для забезпечення необхідних прав:

bash
Копировать код
sudo ./gpu_power_control.sh [energy|performance|default|remove|rescan]
Приклад:

bash
Копировать код
sudo ./gpu_power_control.sh energy
